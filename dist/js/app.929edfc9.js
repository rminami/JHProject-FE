webpackJsonp([26],{0:function(e,t,n){e.exports=n("x35b")},"2GRD":function(e,t){},"7zck":function(e,t){},mUJ2:function(e,t,n){var o={"./Admin.vue":["qbhH",13],"./DataView.vue":["caSP",2,0],"./FileBrowse.vue":["EOQp",0,17],"./ImageView.vue":["Dc/J",24],"./Login.vue":["xJsL",0,3],"./MachineLearning.vue":["RsXe",0,6],"./Models.vue":["cf5c",1,0],"./Prediction.vue":["74S6",0,7],"./Projects.vue":["uwSr",20],"./RawFileView.vue":["MY2x",23],"./Settings.vue":["niH5",22],"./Signup.vue":["psOb",0,8],"./admin/UserControls.vue":["SvCj",0,4],"./dialogs/FileDialog.vue":["cIsK",0],"./dialogs/RenameDialog.vue":["tJ9J",21],"./ml/BasicPanel.vue":["2bMm",0,12],"./ml/EstimatorPanel.vue":["F2wg",0,16],"./ml/InputFilePanel.vue":["9ONp",0,14],"./ml/NextPanel.vue":["AYnF",0,11],"./ml/TransformerPanel.vue":["FBIy",0,15],"./prediction/PredictionInputFile.vue":["h5gJ",0,9],"./prediction/PredictionModel.vue":["gxAb",0,18],"./prediction/PredictionNext.vue":["IuG4",10],"./settings/ServerSettings.vue":["Z2C1",19],"./visualizations/ScatterPlot.vue":["AwyB",5]};function i(e){var t=o[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}i.keys=function(){return Object.keys(o)},i.id="mUJ2",e.exports=i},x35b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("/5sW"),i=n("NYxO"),r=(n("162o"),{data:function(){return{sidebar:!1,mini:!1,projects:["project1","project2","project3"],items:[{icon:"home",title:"Projects",path:"/projects"},{icon:"assignment",title:"Machine Learning",path:"/ml"},{icon:"view_list",title:"Models",path:"/models"},{icon:"donut_large",title:"Prediction",path:"/prediction"},{icon:"settings",title:"Settings",path:"/settings"},{icon:"verified_user",title:"Admin Console",path:"/admin/console"}],adminItems:[{icon:"dashboard",title:"Dashboard",path:"/admin/dashboard"},{icon:"people",title:"User Permissions",path:"/admin/users"},{icon:"swap_vertical_circle",title:"Server Settings",path:"/admin/server-settings"},{icon:"security",title:"Project Controls",path:"/admin/project-controls"}],title:"Digital Pathology Viewer",titleLink:"/projects"}},methods:{logout:function(){var e=this;this.$store.dispatch("authLogout").then(function(){e.$router.push("/login"),e.sidebar=!1})}},computed:Object(i["b"])({currentProject:function(e){return e.currentProject}}),watch:{currentProject:function(){}},name:"App"}),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-navigation-drawer",{attrs:{dark:"",persistent:"","mini-variant":e.mini,"disable-resize-watcher":"",fixed:"",app:""},on:{"update:miniVariant":function(t){e.mini=t}},model:{value:e.sidebar,callback:function(t){e.sidebar=t},expression:"sidebar"}},[n("v-list",[e._l(e.items,function(t,o){return n("v-list-tile",{key:o,attrs:{to:t.path}},[n("v-list-tile-action",[n("v-icon",[e._v(e._s(t.icon))])],1),n("v-list-tile-content",[e._v(e._s(t.title))])],1)}),n("v-expansion-panel",{attrs:{expand:"",flat:""}},[n("v-expansion-panel-content",[n("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n            Admin Tools\n          ")]),n("v-card",e._l(e.adminItems,function(t,o){return n("v-list-tile",{key:o,attrs:{to:t.path}},[n("v-list-tile-action",[n("v-icon",[e._v(e._s(t.icon))])],1),n("v-list-tile-content",[e._v(e._s(t.title))])],1)}))],1)],1),n("v-list-tile",{on:{click:e.logout}},[n("v-list-tile-action",[n("v-icon",[e._v("power_settings_new")])],1),n("v-list-tile-content",[e._v("Logout")])],1)],2)],1),n("v-toolbar",{attrs:{app:""}},[n("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.sidebar=!e.sidebar}}}),n("v-toolbar-title",[n("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:e.titleLink,tag:"span"}},[e._v("\n        "+e._s(e.title)+"\n      ")])],1),n("v-spacer"),n("v-toolbar-items")],1),n("v-content",[n("router-view")],1)],1)},s=[],c=n("XyMi");function u(e){n("2GRD")}var l,p,m=!1,d=u,v="data-v-a2524d5c",h=null,f=Object(c["a"])(r,a,s,m,d,v,h),g=f.exports,b=n("Biqn"),_=n.n(b),w=n("/ocq"),P=(n("y9m4"),n("fKPv")),j=n.n(P),E=n("mtWM"),k=n.n(E),S="CHANGE_BE",I="CHANGE_ML",x="SWITCH_PROJECT";o["a"].use(i["a"]);var L=new i["a"].Store({state:{accessToken:localStorage.getItem("access-token")||"",refreshToken:localStorage.getItem("refresh-token")||"",status:"",currentProject:"data",beEndpoint:"https://rw86.host.cs.st-andrews.ac.uk/be/__BE02__/hci1",mlEndpoint:"https://rw86.host.cs.st-andrews.ac.uk/staging/ml/ML42/"},getters:{isAuthenticated:function(e){return!!e.accessToken}},mutations:(l={authRequest:function(e){e.status="loading"},authSuccess:function(e,t){e.accessToken=t,e.status="success"},authError:function(e){e.accessToken="",e.status="error"},authLogout:function(e){e.accessToken=""}},j()(l,x,function(e,t){e.currentProject=t}),j()(l,S,function(e,t){e.beEndpoint=t}),j()(l,I,function(e,t){e.mlEndpoint=t}),l),actions:(p={},j()(p,S,function(e,t){var n=e.commit;e.state;return new Promise(function(e,o){n(S,t),e()})}),j()(p,I,function(e,t){var n=e.commit;e.state;return new Promise(function(e,o){n(I,t),e()})}),j()(p,"authRequest",function(e,t){var n=e.commit,o=e.state;return new Promise(function(e,i){n("authRequest");var r=new FormData;r.append("username",t.username),r.append("password",t.password),r.append("grant_type","password"),k()({method:"post",baseURL:o.beEndpoint,url:"/oauth/token",data:r}).then(function(t){console.log(t.data);var o=t.data.access_token;localStorage.setItem("access-token",o),n("authSuccess",o),e(t.data)}).catch(function(e){n("authError"),console.log(e.response.data),localStorage.removeItem("access-token"),i(e)})})}),j()(p,"authLogout",function(e){var t=e.commit;e.state;return new Promise(function(e,n){t("authLogout"),localStorage.removeItem("access-token"),e()})}),j()(p,x,function(e,t){var n=e.commit;e.state;return new Promise(function(e,o){n("SWITCH_PROJECT",t),e()})}),p)}),A=function(e,t,n){L.getters.isAuthenticated?n():n("/login")},y=function(e,t,n){L.getters.isAuthenticated?n("/projects"):n()},M=[{path:"/",redirect:"/login"},{path:"/projects",component:"Projects",beforeEnter:A},{path:"/projects/:project_name/*.csv",component:"DataView",beforeEnter:A},{path:"/projects/:project_name/*.(png|jpg|dzi)",component:"ImageView",beforeEnter:A},{path:"/projects/:project_name/*.*",component:"RawFileView",beforeEnter:A},{path:"/projects/:project_name/*",component:"FileBrowse",beforeEnter:A},{path:"/ml",component:"MachineLearning",beforeEnter:A},{path:"/admin/console",component:"Admin",beforeEnter:A},{path:"/admin/users",component:"admin/UserControls",beforeEnter:A},{path:"/admin/server-settings",component:"settings/ServerSettings",beforeEnter:A},{path:"/prediction/",component:"Prediction",beforeEnter:A},{path:"/models/",component:"Models",beforeEnter:A},{path:"/login",component:"Login",beforeEnter:y},{path:"/signup",component:"Signup",beforeEnter:y},{path:"/settings",component:"Settings",beforeEnter:A}],C=M.map(function(e){return _()({},e,{component:function(){return n("mUJ2")("./".concat(e.component,".vue"))}})});o["a"].use(w["a"]);var T=new w["a"]({mode:"history",routes:C}),B=n("3EgV"),R=n.n(B);n("7zck");o["a"].use(R.a),o["a"].config.productionTip=!1;var F=localStorage.getItem("access-token");F&&(k.a.defaults.headers.common.Authorization="Bearer ".concat(F),k.a.defaults.headers.common.Authorisation="Bearer ".concat(F),k.a.defaults.headers.common["X-Backend-Server-Url"]="https://rw86.host.cs.st-andrews.ac.uk/be/__BE02__/hci1"),new o["a"]({router:T,store:L,render:function(e){return e(g)}}).$mount("#app")}},[0]);
//# sourceMappingURL=app.929edfc9.js.map